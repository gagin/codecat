#!/bin/sh

# Check if main.go has any changes (staged or unstaged)
if git diff --quiet HEAD main.go; then
    # Exit code 0: No changes
    echo "Hook: No changes detected in main.go. Skipping version update."
    exit 0
else
    # Exit code 1: Changes detected
    if go run dev_process_utils/increment_version.go; then
        # Add the updated version file to the staging area
        git add main.go
        echo "Hook: Version updated and staged."
        exit 0
    else
        echo "Hook: Version update script failed."
        exit 1 # Non-zero exit code to indicate failure
    fi
fi